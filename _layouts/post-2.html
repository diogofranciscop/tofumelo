---
layout: default
---
<div class="post-container2">
    <div class="recipe-card2">

        <div class="image-section2">
            <img class="post-recipe-img2" src="{{ page.image }}" loading="lazy">
            <div class="overlay2">
                <div class="header2">
                    <h1>{{page.title | upcase}}</h1>
                    <h2>{{page.description}}</h2>
                    <div class="info2">
                        <div class="servings2">
                            <img src="/assets/img/serving.webp" alt="Type">
                            <p><span>{{page.type}}</span> </p>
                        </div>
                        <div class="time2">
                            <img src="/assets/img/clock.webp" alt="Time">
                            <p>Total: <span>{{page.time-total}}min |</span> Preparação: <span>{{page.time-prepar}}min
                                    |</span> Confeção: <span>{{page.time-confe}}min</span></p>
                        </div>
                        <div class="porcoes2">
                            <img src="/assets/img/porcoes.webp" alt="Serves">
                            <input type="number" id="servings-input" value="4" min="1" class="custom-input">
                            <!-- Display the serving unit dynamically -->
                            <span id="servings-text"></span>
                        </div>
                    </div>
                </div>
                <div class="container-informacao">
                    <div class="informação-nutricional">
                        Consultar informação nutricional
                        <i class="fas fa-caret-down"></i>

                    </div>
                </div>
            </div>


        </div>
        <div id="InformationBox" class="InformationBox hidden">
            
            <h2 class="informacao-title">Informação nutricional*</h2>
            <h2 class="por-porcao">(por porção)</h2>
            <div class="nutrition-item">
                <span class="value">{{page.calorias}}KCal</span>
                <span class="label">Calorias</span>
            </div>
            <div class="nutrition-item">
                <span class="value">{{page.proteinas}}g</span>
                <span class="label">Proteína</span>
            </div>
            <div class="nutrition-item">
                <span class="value">{{page.hidratos}}g</span>
                <span class="label">Hidratos de Carbono</span>
            </div>
            <div class="nutrition-item">
                <span class="value">{{page.lipidos}}g</span>
                <span class="label">Lípidos</span>
            </div>

            <h2 class="note">* valores calculados através de IA</h2>
        </div>
        <div class="content2">
                <div class="container-ingredients2">
                    <div class="ingredients2">
                        <h3 class="ingredient-title shadow-effect-ingredients">INGREDIENTES</h3>
                        {% assign sections = page.ingredients %}
                        {% for section in sections %}
                        <h4>Para {{ section[0] }}</h4>
                        <ul>
                            {% for ingredient in section[1] %}
                            {% assign parts = ingredient | split: "|" %}
                            {% assign measure_value = parts[0] | split: " " | first %}
                            {% assign measure_unit = parts[0] | remove_first: measure_value | strip %}
                            <li>
                                <!-- Separate measure3 from ingredient3 -->
                                <span class="measure3" data-original="{{ measure_value }}" data-unit="{{ measure_unit }}">
                                    {{ measure_value }}{{ measure_unit }}
                                </span>
                                {% if parts[1] %}
                                <span class="ingredient3">{{ parts[1] }}</span>
                                {% endif %}
                            </li>
                            {% endfor %}
                        </ul>
                        
                        {% endfor %}
                    </div>
            </div>
            <div class="container-directions2">
                <div class="directions2">
                    <h3 class="instruction-title shadow-effect-instructions2"style="text-align: center;">INSTRUÇÕES</h3>
                    <ol class="post-2-ol">
                        {% assign sections = page.instructions %}
                        {% for section in sections %}
                        <h4>Para {{ section[0] }}</h4>
                        <ol>
                            {% for ingredient in section[1] %}
                            <li>{{ ingredient | markdownify}}</li>
                            {% endfor %}
                        </ol>
                        {% endfor %}
                    </ol>
                    <!-- Notes Section (Footer) -->
                    {% if page.notes %}
                    <div class="notes-footer2">
                        <h3>Notas</h3>
                        <ul>
                            {% for note in page.notes %}
                            <li>
                                <span>{{ note | markdownify | replace: "<p>", "" | replace: "</p>", "" }}</span>
                            </li>
                            {% endfor %}
                        </ul>                    
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

    </div>

</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
    // Extract serving details from page.serve
    const servingText = {{ page.serve | jsonify }}; // Example: "4 pratos de sopa"
    const match = servingText.match(/^(\d+)\s*(.+)$/);
    const defaultServing = match ? parseFloat(match[1]) : 1; // Default serving count
    const servingUnit = match ? match[2].trim() : ""; // Serving unit (e.g., "pratos de sopa")

    // Set the serving unit text on page load
    $('#servings-text').text(servingUnit);

    // Function to format numbers (remove decimals if integer)
    function formatNumber(value) {
        return Number.isInteger(value) ? value : value.toFixed(2);
    }

    // Function to update ingredient measurements dynamically
    function updateMeasurements(selectedServings) {
        $('.ingredients2 ul').each(function () {
            // Loop through each section's ingredient list
            $(this).find('li').each(function () {
                const $measureSpan = $(this).find('.measure3'); // Select the measure span
                const originalMeasure = parseFloat($measureSpan.data('original')); // Get original measure
                const unit = $measureSpan.data('unit'); // Get the unit dynamically
                if (originalMeasure) {
                    // Calculate the new measure based on selected servings
                    const newMeasure = (originalMeasure / defaultServing) * selectedServings;
                    $measureSpan.text(`${formatNumber(newMeasure)}${unit ? ` ${unit}` : ''}`); // Update the displayed measure
                } else {
                    // Handle cases where there is no numeric value
                    $measureSpan.text($measureSpan.text().trim());
                }
            });
        });
    }

    // Event listener for servings input field
    $('#servings-input').on('input', function () {
        const selectedServings = parseFloat($(this).val()); // Get the input value
        if (!isNaN(selectedServings) && selectedServings > 0) {
            updateMeasurements(selectedServings); // Dynamically update the measurements
        }
    });

    // Initial rendering for the default serving size
    $('#servings-input').val(defaultServing); // Set default servings in input
    updateMeasurements(defaultServing); // Initialize ingredient measures
});

</script>