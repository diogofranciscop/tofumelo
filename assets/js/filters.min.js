let originalOrder=[],filteredPosts=[],selectedRoles=[],selectedDiets=[],searchTerm="",selectedTitleSort="",selectedTimeSort="";function filterAndSortPosts(){filteredPosts=(filteredPosts=[...originalOrder]).filter(e=>{let t=0===selectedRoles.length||selectedRoles.some(t=>e.type.includes(t)),i=0===selectedDiets.length||selectedDiets.every(t=>e.diet.includes(t)),o=e.title.toLowerCase().includes(searchTerm);return t&&i&&o}),selectedTitleSort?filteredPosts.sort((e,t)=>"toggleOrdemAZ"===selectedTitleSort?e.title.localeCompare(t.title):t.title.localeCompare(e.title)):selectedTimeSort&&filteredPosts.sort((e,t)=>"toggleTempoMenor"===selectedTimeSort?parseInt(e.time)-parseInt(t.time):parseInt(t.time)-parseInt(e.time)),loadPaginatedPosts(1,filteredPosts)}function loadPaginatedPosts(e,t){let i=window.innerWidth<=768,o=i?10:20,s=(e-1)*o,l=t.slice(s,s+o),n=$("#post-container");n.empty(),l.forEach(e=>{let i=`
    <a href="${e.url}" class="card" data-index="${t.indexOf(e)+1}">
        ${"yes"===e.new?'<div class="new-tape">Nova Receita</div>':""}
        <div class="card__overlay"><p>${e.description}</p></div>
        <div class="card__img-container">
            <picture>
                <source srcset="${e.image.replace(".webp","-126px.webp")}" media="(max-width: 768px)" width="126" height="140">
                <source srcset="${e.image.replace(".webp","-180px.webp")}" media="(max-width: 1500px)" width="180" height="200">
                <img src="${e.image}" class="card__img" alt="${e.title}" loading="auto">
            </picture>
        </div>
        <div class="card__footer">
            <span class="title-card">${e.title.toUpperCase()}</span>
        </div>
    </a>
`;n.append(i)}),updatePaginationButtons(e,t.length,o)}function updatePaginationButtons(e,t,i){let o=Math.ceil(t/i),s=$("#pagination-container");s.empty();let l=$("<button>").text("PRIMEIRA P\xc1GINA").addClass("pagination-button").on("click",function(){loadPaginatedPosts(1,filteredPosts),window.scrollTo({top:0,behavior:"smooth"})});if(s.append(l),e>3){let n=$("<span>").text("...").addClass("pagination-ellipsis");s.append(n)}for(let a=Math.max(1,e-2);a<=Math.min(o,e+2);a++){let r=$("<button>").text(a).addClass("pagination-button");a===e&&r.addClass("active"),r.on("click",function(){loadPaginatedPosts(a,filteredPosts),window.scrollTo({top:0,behavior:"smooth"})}),s.append(r)}if(e<o-2){let d=$("<span>").text("...").addClass("pagination-ellipsis");s.append(d)}let c=$("<button>").text("\xdaLTIMA P\xc1GINA").addClass("pagination-button").on("click",function(){loadPaginatedPosts(o,filteredPosts),window.scrollTo({top:0,behavior:"smooth"})});s.append(c)}function setupFilterButton(){$(".filter-button").on("click",function(e){e.stopPropagation(),$("#filterBox").toggle(),function e(t){let i=$(t).offset(),o=$(t).outerHeight();$("#filterBox").css({top:i.top+o+10+"px",left:i.left+"px",position:"absolute"})}(this)}),$(document).on("click",function(e){let t=$("#filterBox"),i=$(".filter-button");t.is(e.target)||0!==t.has(e.target).length||i.is(e.target)||t.hide()})}function setupRoleSelection(){$(".button-4").on("click",function(){let e=$(this).data("role");toggleSelection(e,"role"),$(this).toggleClass("selected",selectedRoles.includes(e)),filterAndSortPosts()})}function setupDietSelection(){$("#filterBox input[data-diet]").on("change",function(){let e=$(this).data("diet")||"";toggleSelection(e,"diet"),filterAndSortPosts()})}function setupSorting(){$('input[type="checkbox"][name="sort"]').on("change",function(){let e=$(this).attr("id");$(this).is(":checked")?(selectedTitleSort=e.startsWith("toggleOrdem")?e:"",selectedTimeSort=e.startsWith("toggleTempo")?e:"",$('input[type="checkbox"][name="sort"]').not(this).prop("checked",!1)):"toggleOrdemAZ"===e||"toggleOrdemZA"===e?selectedTitleSort="":("toggleTempoMenor"===e||"toggleTempoMaior"===e)&&(selectedTimeSort=""),filterAndSortPosts()})}function setupSearch(){$(".searchTerm").on("input",function(){searchTerm=$(this).val().toLowerCase(),filterAndSortPosts()})}function toggleSelection(e,t){let i="role"===t?selectedRoles:selectedDiets,o=i.indexOf(e);-1===o?i.push(e):i.splice(o,1)}$(document).ready(function(){filteredPosts=[...originalOrder=JSON.parse(JSON.stringify(allPosts))],setupFilterButton(),setupRoleSelection(),setupDietSelection(),setupSorting(),setupSearch(),$(window).on("pageshow",function(){reapplyFilters()}),loadPaginatedPosts(1,filteredPosts)}),window.addEventListener("resize",()=>{window.innerWidth,loadPaginatedPosts(1,filteredPosts)});